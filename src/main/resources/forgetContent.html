<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->
<!-- Begin Head -->

<head>
  <title>修改密码界面</title>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="author" content="">
  <meta name="MobileOptimized" content="320">
  <!--Start Style -->
  <link rel="stylesheet" type="text/css" href="static/css/fonts.css">
  <link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="static/css/auth.css">
  <link rel="icon" type="images/icon" href="static/icon/提示_tips.png">
</head>

<body>
<div class="ad-auth-wrapper">
  <div class="ad-auth-box">
    <div class="row align-items-center">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
        <div class="ad-auth-img">
          <img src="static/picture/auth-img1.png" alt="">
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
        <div class="ad-auth-content">
          <form method="get" action="forget">
            <button style="border: 0; border-radius: 10px"><img src="static/icon/返回_return.png" width="20" height="20"></button>
          </form>
          <!--todo 此处进行的注册操作也是可以进行实现-->
          <h2><span class="primary" th:text="${loginInfo}"></span></h2>
          <!--todo 此处进行模板输入字段操作-->
          <p th:text="${enrollTips}" ></p>
          <!--这里表单提交一定要使用return来进行操作，不然就会出现无法进行的操作-->
          <form id="theHoleBox" method="post" action="userNameTestServlet" onsubmit="return CheckLatestInfo()">
            <div class="ad-auth-feilds mb-30">
              <!--表单提交就是一个触发器，需要触发的逻辑才能携带相关的载荷操作，如何将载荷传递到相关的位置那才是非常必要的!-->
              <div>
                <input  id="username" type="text" placeholder="username" name="username">
              </div>
              <div id="theRuleBox">
                <!--TODO 用选择器进行操作吧-->
                <h6 id="title" style="font-family: 'Microsoft JhengHei',serif">请输入已有用户名称</h6>
              </div>
              <div class="ad-auth-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 483.3 483.3"><path d="M424.3,57.75H59.1c-32.6,0-59.1,26.5-59.1,59.1v249.6c0,32.6,26.5,59.1,59.1,59.1h365.1c32.6,0,59.1-26.5,59.1-59.1    v-249.5C483.4,84.35,456.9,57.75,424.3,57.75z M456.4,366.45c0,17.7-14.4,32.1-32.1,32.1H59.1c-17.7,0-32.1-14.4-32.1-32.1v-249.5    c0-17.7,14.4-32.1,32.1-32.1h365.1c17.7,0,32.1,14.4,32.1,32.1v249.5H456.4z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#9abeed"></path><path d="M304.8,238.55l118.2-106c5.5-5,6-13.5,1-19.1c-5-5.5-13.5-6-19.1-1l-163,146.3l-31.8-28.4c-0.1-0.1-0.2-0.2-0.2-0.3    c-0.7-0.7-1.4-1.3-2.2-1.9L78.3,112.35c-5.6-5-14.1-4.5-19.1,1.1c-5,5.6-4.5,14.1,1.1,19.1l119.6,106.9L60.8,350.95    c-5.4,5.1-5.7,13.6-0.6,19.1c2.7,2.8,6.3,4.3,9.9,4.3c3.3,0,6.6-1.2,9.2-3.6l120.9-113.1l32.8,29.3c2.6,2.3,5.8,3.4,9,3.4    c3.2,0,6.5-1.2,9-3.5l33.7-30.2l120.2,114.2c2.6,2.5,6,3.7,9.3,3.7c3.6,0,7.1-1.4,9.8-4.2c5.1-5.4,4.9-14-0.5-19.1L304.8,238.55z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#9abeed"></path></svg>
              </div>
            </div>
            <div class="ad-auth-form">
              <div class="ad-auth-feilds">
                <input id="password" type="password" placeholder="password" onchange="checkUserPassword(this)">
                <div id="thePasswordBox">
                  <h6 id="titlePassword">密码组成:6~16个字符长度,大小写+特殊符号</h6>
                </div>
                <div class="ad-auth-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 482.8 482.8"><path d="M395.95,210.4h-7.1v-62.9c0-81.3-66.1-147.5-147.5-147.5c-81.3,0-147.5,66.1-147.5,147.5c0,7.5,6,13.5,13.5,13.5    s13.5-6,13.5-13.5c0-66.4,54-120.5,120.5-120.5c66.4,0,120.5,54,120.5,120.5v62.9h-275c-14.4,0-26.1,11.7-26.1,26.1v168.1    c0,43.1,35.1,78.2,78.2,78.2h204.9c43.1,0,78.2-35.1,78.2-78.2V236.5C422.05,222.1,410.35,210.4,395.95,210.4z M395.05,404.6    c0,28.2-22.9,51.2-51.2,51.2h-204.8c-28.2,0-51.2-22.9-51.2-51.2V237.4h307.2L395.05,404.6L395.05,404.6z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#9abeed"></path><path d="M241.45,399.1c27.9,0,50.5-22.7,50.5-50.5c0-27.9-22.7-50.5-50.5-50.5c-27.9,0-50.5,22.7-50.5,50.5    S213.55,399.1,241.45,399.1z M241.45,325c13,0,23.5,10.6,23.5,23.5s-10.5,23.6-23.5,23.6s-23.5-10.6-23.5-23.5    S228.45,325,241.45,325z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#9abeed"></path></svg>
                </div>
              </div>
              <br>
              <div class="ad-auth-feilds">
                <input id="confirmPassword" type="password" placeholder="ConfirmPassword" name="password" onchange="checkConfirm(this)">
                <div id="ConfirmBox">
                  <h6 id="Confirm">和输入的密码一致</h6>
                </div>
                <div class="ad-auth-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 482.8 482.8"><path d="M395.95,210.4h-7.1v-62.9c0-81.3-66.1-147.5-147.5-147.5c-81.3,0-147.5,66.1-147.5,147.5c0,7.5,6,13.5,13.5,13.5    s13.5-6,13.5-13.5c0-66.4,54-120.5,120.5-120.5c66.4,0,120.5,54,120.5,120.5v62.9h-275c-14.4,0-26.1,11.7-26.1,26.1v168.1    c0,43.1,35.1,78.2,78.2,78.2h204.9c43.1,0,78.2-35.1,78.2-78.2V236.5C422.05,222.1,410.35,210.4,395.95,210.4z M395.05,404.6    c0,28.2-22.9,51.2-51.2,51.2h-204.8c-28.2,0-51.2-22.9-51.2-51.2V237.4h307.2L395.05,404.6L395.05,404.6z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#9abeed"></path><path d="M241.45,399.1c27.9,0,50.5-22.7,50.5-50.5c0-27.9-22.7-50.5-50.5-50.5c-27.9,0-50.5,22.7-50.5,50.5    S213.55,399.1,241.45,399.1z M241.45,325c13,0,23.5,10.6,23.5,23.5s-10.5,23.6-23.5,23.6s-23.5-10.6-23.5-23.5    S228.45,325,241.45,325z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#9abeed"></path></svg>
                </div>
              </div>
            </div>
            <div  class="ad-auth-btn">
              <button  class="ad-btn ad-login-member">点击注册</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  //姓名
  //密码的长度6~16
  //小写字母 + 大写字母 +特殊符号
  //三到十个字符操作
  //设置密码操作
  const thePassWordRegex=/^[a-z0-9A-Z\W]{6,15}$/

  //TODO 对用户名进行检验操作，此处使用ajax来进行求解操作,前端很多的操作还是我无法理解的，整个计算机世界很广袤，让尔等难以进行操作！

  function checkUserPassword() {
    let password=document.getElementById("password")
    let checkPassword=thePassWordRegex.test(password.value)
    let theTag=document.getElementById("titlePassword")
    if (password.value===""){
      theTag.innerHTML=`<h6>密码组成:6~16个字符长度,大小写+特殊符号</h6>`
    }
    if (checkPassword) {
      // theTag.parentNode.removeChild(theTag)
      theTag.innerHTML = "<img src='../webapp/static/icon/对勾_check-correct.png' width='20' height='20'/>符合规则"
    }else if (checkPassword===false && password.value !=="") {
      theTag.innerHTML = "<img src='../webapp/static/icon/报错_caution.png' width='20' height='20'/>不符合规则"
    }
    return checkPassword
  }
  function checkConfirm(){
    let  passwordValue=document.getElementById("password")
    let  ConfirmValue=document.getElementById("confirmPassword")
    let  theInnerContent=document.getElementById("Confirm")
    let  theConfirmFlags =(passwordValue.value===ConfirmValue.value)
    if (theConfirmFlags) {
      theInnerContent.innerHTML="<img src='../webapp/static/icon/对勾_check-correct.png' width='20' height='20'/>两次输入密码是一致的"
    }else {
      theInnerContent.innerHTML="<img src='../webapp/static/icon/报错_caution.png' width='20' height='20'/>两次密码不一致"
    }
    return theConfirmFlags
  }
  function CheckLatestInfo(){
    let ThreeFlags=checkConfirm() && checkUserPassword()
    if (!ThreeFlags){
      window.alert("用户密码参数存在错误,请重新输入")
      location.reload()
    }
    return ThreeFlags
  }

</script>
</body>
</html>